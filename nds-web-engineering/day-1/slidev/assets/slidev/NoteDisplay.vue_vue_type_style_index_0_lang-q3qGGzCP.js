import{d as H,A as C,f as v,n as m,g as u,Y as T,F as B,t as h,ai as I,ak as z,aj as F,k as D,o as f,r as E,G as P,Q as R,H as V,p as j}from"../modules/vue-BQzGM3uA.js";import{c as K,r as q}from"../monaco/bundled-types-CMqe5AZ1.js";import{C as N,_ as G}from"../index-dCUxElOH.js";const Q=["title"],U={class:"flex gap-0.2 items-center min-w-16 font-mono mr1"},X={"text-primary":""},Y={op50:"","text-sm":""},J={key:1,op50:"","flex-auto":"",pl1:""},O={relative:"","flex-auto":"",h5:"","font-mono":"",flex:"~"},W=["min","max"],Z=H({__name:"ClicksSlider",props:{clicksContext:{},readonly:{type:Boolean},active:{type:Boolean,default:!0}},setup(M){const d=M,t=C(()=>d.clicksContext.total),k=C(()=>K(0,d.clicksContext.clicksStart,t.value)),p=C(()=>t.value-k.value+1),r=C({get(){return d.clicksContext.current>t.value?-1:d.clicksContext.current},set(l){d.clicksContext.current=l}}),_=C(()=>q(k.value,t.value+1));function g(){d.readonly||(r.value<0||r.value>t.value)&&(r.value=0)}return(l,n)=>(f(),v("div",{class:m(["flex gap-1 items-center select-none",p.value&&d.clicksContext.isMounted?"":"op50"]),title:`Clicks in this slide: ${p.value}`},[u("div",U,[n[4]||(n[4]=u("div",{class:"i-carbon:cursor-1 text-sm op50"},null,-1)),r.value>=0&&r.value!==T(N)&&l.active?(f(),v(B,{key:0},[n[2]||(n[2]=u("div",{"flex-auto":""},null,-1)),u("span",X,h(r.value),1),n[3]||(n[3]=u("span",{op25:"","text-sm":""},"/",-1)),u("span",Y,h(t.value),1)],64)):(f(),v("div",J,h(t.value),1))]),u("div",O,[(f(!0),v(B,null,z(_.value,o=>(f(),v("div",{key:o,border:"y main","of-hidden":"",relative:"",class:m([o===0?"rounded-l border-l":"",o===t.value?"rounded-r border-r":""]),style:D({width:p.value>0?`${1/p.value*100}%`:"100%"})},[u("div",{absolute:"","inset-0":"",class:m(o<=r.value&&l.active?"bg-primary op15":"")},null,2),u("div",{class:m([+o==+r.value&&l.active?"text-primary font-bold op100 border-primary":"op30 border-main",o===0?"rounded-l":"",o===t.value?"rounded-r":"border-r-2"]),"w-full":"","h-full":"","text-xs":"",flex:"","items-center":"","justify-center":"","z-1":""},h(o),3)],6))),128)),I(u("input",{"onUpdate:modelValue":n[0]||(n[0]=o=>r.value=o),class:m(["range",l.readonly?"pointer-events-none":""]),type:"range",min:k.value,max:t.value,step:1,absolute:"","inset-0":"","z-label":"",op0:"",style:D({"--thumb-width":`${1/(p.value+1)*100}%`}),onMousedown:g,onFocus:n[1]||(n[1]=o=>{var y;return(y=o.currentTarget)==null?void 0:y.blur()})},null,46,W),[[F,r.value]])])],10,Q))}}),ae=G(Z,[["__scopeId","data-v-42d66131"]]),ee=["innerHTML"],te=["textContent"],oe=["textContent"],L="slidev-note-fade",x="slidev-note-click-mark",re=H({__name:"NoteDisplay",props:{class:{},noteHtml:{},note:{},highlight:{type:Boolean,default:!0},placeholder:{},clicksContext:{},autoScroll:{type:Boolean}},emits:["markerDblclick","markerClick"],setup(M,{emit:d}){const t=M,k=d,p=C(()=>{var l;return t.clicksContext!=null&&((l=t.noteHtml)==null?void 0:l.includes(x))}),r=E(null);function _(){var $,A;if(!r.value||!p.value)return;const l=Array.from(r.value.querySelectorAll(`.${x}`)),n=new Map,o=new Map;let y=0;for(const i of l){const a=Number(i.dataset.clicks);n.set(i,a);let s=i,e=i.parentElement;for(;e&&s!==r.value;)o.has(e)||o.set(e,[[null,y]]),o.get(e).push([s,a]),s=e,e=e.parentElement;y=a}const S=new Map;for(const[i,a]of o){let s=!1,e=0;for(const c of Array.from(i.childNodes)){let b=!1;for(;c===(($=a[e+1])==null?void 0:$[0]);)b=!0,e++;if(b)continue;let w=c;if(c.nodeType===3){if(!((A=c.textContent)!=null&&A.trim()))continue;w=document.createElement("span"),w.textContent=c.textContent,i.insertBefore(w,c),c.remove()}s||(s=e===0),S.set(w,a[e][1])}s||(a[0][1]=-1)}return i=>{const a=t.highlight;for(const[s,e]of o)s.classList.toggle(L,a&&!e.some(([c,b])=>b===i));for(const[s,e]of S)s.classList.toggle(L,a&&e!==i);for(const[s,e]of n)s.classList.remove(L),s.classList.toggle(`${x}-past`,a&&e<i),s.classList.toggle(`${x}-active`,a&&e===i),s.classList.toggle(`${x}-next`,a&&e===i+1),s.classList.toggle(`${x}-future`,a&&e>i+1),s.ondblclick=c=>{a&&(k("markerDblclick",c,e),!c.defaultPrevented&&(t.clicksContext.current=e,c.stopPropagation(),c.stopImmediatePropagation()))},s.onclick=c=>{a&&k("markerClick",c,e)},a&&t.autoScroll&&e===i&&s.scrollIntoView({block:"center",behavior:"smooth"})}}const g=E();return P(()=>[t.noteHtml,t.highlight],()=>{j(()=>{g.value=_()})},{immediate:!0}),R(()=>{_()}),V(()=>{var n,o;const l=((n=t.clicksContext)==null?void 0:n.current)??N;(o=g.value)==null||o.call(g,l)}),(l,n)=>l.noteHtml?(f(),v("div",{key:0,ref_key:"noteDisplay",ref:r,class:m(["prose overflow-auto outline-none slidev-note",[t.class,p.value?"slidev-note-with-clicks":""]]),innerHTML:l.noteHtml},null,10,ee)):l.note?(f(),v("div",{key:1,class:m(["prose overflow-auto outline-none slidev-note",t.class])},[u("p",{textContent:h(l.note)},null,8,te)],2)):(f(),v("div",{key:2,class:m(["prose overflow-auto outline-none opacity-50 italic select-none slidev-note",t.class])},[u("p",{textContent:h(t.placeholder||"No notes.")},null,8,oe)],2))}});export{ae as C,re as _};
