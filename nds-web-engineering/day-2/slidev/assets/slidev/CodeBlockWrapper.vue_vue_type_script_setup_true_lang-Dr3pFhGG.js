import{d as B,e as E}from"../modules/unplugin-icons-B44XJvnk.js";import{d as H,f as u,i as h,o as d,n as _,r as V,S as M,G as w,P as $,z as m,aJ as q,K,j as T,e as z,g as D,t as R,X as y,b as I,k as X}from"../modules/vue-CghAfs9N.js";import{a5 as G,C as J,a6 as O,a7 as P}from"../index-CpV9gcbb.js";import{u as U}from"./context-SJaGXDfJ.js";import{a as L}from"../monaco/bundled-types-CTRGeRro.js";const W=H({__name:"TitleIcon",props:{title:{}},setup(r){const e={pnpm:"i-vscode-icons:file-type-light-pnpm",npm:"i-vscode-icons:file-type-npm",yarn:"i-vscode-icons:file-type-yarn",bun:"i-vscode-icons:file-type-bun",deno:"i-vscode-icons:file-type-deno",vue:"i-vscode-icons:file-type-vue",svelte:"i-vscode-icons:file-type-svelte",angular:"i-vscode-icons:file-type-angular",react:"i-vscode-icons:file-type-reactjs",next:"i-vscode-icons:file-type-light-next",nuxt:"i-vscode-icons:file-type-nuxt",solid:"logos:solidjs-icon",astro:"i-vscode-icons:file-type-light-astro",rollup:"i-vscode-icons:file-type-rollup",webpack:"i-vscode-icons:file-type-webpack",vite:"i-vscode-icons:file-type-vite",esbuild:"i-vscode-icons:file-type-esbuild","package.json":"i-vscode-icons:file-type-node","tsconfig.json":"i-vscode-icons:file-type-tsconfig",".npmrc":"i-vscode-icons:file-type-npm",".editorconfig":"i-vscode-icons:file-type-editorconfig",".eslintrc":"i-vscode-icons:file-type-eslint",".eslintignore":"i-vscode-icons:file-type-eslint","eslint.config":"i-vscode-icons:file-type-eslint",".gitignore":"i-vscode-icons:file-type-git",".gitattributes":"i-vscode-icons:file-type-git",".env":"i-vscode-icons:file-type-dotenv",".env.example":"i-vscode-icons:file-type-dotenv",".vscode":"i-vscode-icons:file-type-vscode","tailwind.config":"vscode-icons:file-type-tailwind","uno.config":"i-vscode-icons:file-type-unocss","unocss.config":"i-vscode-icons:file-type-unocss",".oxlintrc":"i-vscode-icons:file-type-oxlint","vue.config":"i-vscode-icons:file-type-vueconfig",".mts":"i-vscode-icons:file-type-typescript",".cts":"i-vscode-icons:file-type-typescript",".ts":"i-vscode-icons:file-type-typescript",".tsx":"i-vscode-icons:file-type-typescript",".mjs":"i-vscode-icons:file-type-js",".cjs":"i-vscode-icons:file-type-js",".json":"i-vscode-icons:file-type-json",".js":"i-vscode-icons:file-type-js",".jsx":"i-vscode-icons:file-type-js",".md":"i-vscode-icons:file-type-markdown",".py":"i-vscode-icons:file-type-python",".ico":"i-vscode-icons:file-type-favicon",".html":"i-vscode-icons:file-type-html",".css":"i-vscode-icons:file-type-css",".scss":"i-vscode-icons:file-type-scss",".yml":"i-vscode-icons:file-type-light-yaml",".yaml":"i-vscode-icons:file-type-light-yaml",".php":"i-vscode-icons:file-type-php"};function o(i){const n=i.match(/~([^~]+)~/g);if(n&&n.length>0)return n[0].slice(1,-1);const p=Object.keys(e).sort((c,g)=>g.length-c.length);for(const c of p)if(i.toLowerCase().includes(c.toLowerCase()))return e[c];return""}return(i,n)=>o(i.title)?(d(),u("div",{key:0,class:_(`${o(i.title)} w-3.5 h-3.5 relative`)},null,2)):h("v-if",!0)}}),F=["data-title"],Q={key:0,class:"slidev-code-block-title"},Y={class:"leading-1em"},Z=["title"],ce=H({__name:"CodeBlockWrapper",props:{ranges:{type:Array,default:()=>[]},finally:{type:[String,Number],default:"last"},startLine:{type:Number,default:1},lines:{type:Boolean,default:L.lineNumbers},at:{type:[String,Number],default:"+1"},maxHeight:{type:String,default:void 0},title:{type:String,default:void 0}},setup(r){const e=r,{$clicksContext:o}=U(),i=V(),n=G();M(()=>{o.unregister(n)}),w(()=>{var t;(t=i.value)==null||t.classList.toggle("slidev-code-line-numbers",e.lines)}),$(()=>{var f;if(!o||!((f=e.ranges)!=null&&f.length))return;const t=o.calculateSince(e.at,e.ranges.length-1);o.register(n,t);const s=m(()=>t?Math.max(0,o.current-t.start+1):J),l=m(()=>e.finally==="last"?e.ranges.at(-1):e.finally.toString());w(()=>{if(!i.value)return;let v=e.ranges[s.value]??l.value;const C=v==="hide";i.value.classList.toggle(O,C),C&&(v=e.ranges[s.value+1]??l.value);const S=i.value.querySelector(".shiki"),x=Array.from(S.querySelectorAll("code > .line")),N=x.length;if(P(v,N,e.startLine,a=>[x[a]]),e.maxHeight){const a=Array.from(S.querySelectorAll(".line.highlighted"));a.reduce((j,A)=>A.offsetHeight+j,0)>i.value.offsetHeight?a[0].scrollIntoView({behavior:"smooth",block:"start"}):a.length>0&&a[Math.round((a.length-1)/2)].scrollIntoView({behavior:"smooth",block:"center"})}})});const{copied:p,copy:c}=q();function g(){var s,l;const t=(l=(s=i.value)==null?void 0:s.querySelector(".slidev-code"))==null?void 0:l.textContent;t&&c(t)}const k=K("activeTitle",null),b=m(()=>k===null&&e.title);return(t,s)=>{const l=B,f=E;return d(),u("div",{ref_key:"el",ref:i,class:_(["slidev-code-wrapper relative group",{"slidev-code-line-numbers":e.lines,active:y(k)===r.title}]),style:X({"max-height":e.maxHeight,"overflow-y":e.maxHeight?"scroll":void 0,"--start":e.startLine}),"data-title":r.title},[b.value?(d(),u("div",Q,[z(W,{title:r.title},null,8,["title"]),D("div",Y,R(r.title.replace(/~([^~]+)~/g,"").trim()),1)])):h("v-if",!0),T(t.$slots,"default"),y(L).codeCopy?(d(),u("button",{key:1,class:_(["slidev-code-copy absolute right-0 transition opacity-0 group-hover:opacity-20 hover:!opacity-100",b.value?"top-10":"top-0"]),title:y(p)?"Copied":"Copy",onClick:s[0]||(s[0]=v=>g())},[y(p)?(d(),I(l,{key:0,class:"p-2 w-8 h-8"})):(d(),I(f,{key:1,class:"p-2 w-8 h-8"}))],10,Z)):h("v-if",!0)],14,F)}}});export{ce as _};
