const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/slidev/shiki-QBZ13Uek.js","assets/monaco/bundled-types-CTRGeRro.js","assets/modules/file-saver-BzOOqXCn.js","assets/modules/vue-CghAfs9N.js","assets/monaco/bundled-types-CmBHAYV1.css","assets/modules/shiki-CVmV-mGN.js","assets/modules/shiki-CozCpemh.css"])))=>i.map(i=>d[i]);
import{r as w,d as T,G as I,f as a,o,ae as L,z as P,U as D,P as H,aR as z,S as J,E as F,ah as U,i as R,am as q,g as A,t as O,X as x,F as k,aj as B,b as G,n as K,H as W,k as X,e as Q,w as Y}from"../modules/vue-CghAfs9N.js";import{n as Z,_ as V,l as ee,k as $}from"../monaco/bundled-types-CTRGeRro.js";import{ac as te,a as ne,a5 as se}from"../index-CpV9gcbb.js";import{u as re}from"./context-SJaGXDfJ.js";import{_ as ie}from"./IconButton.vue_vue_type_script_setup_true_lang-CJwvtK99.js";import"../modules/file-saver-BzOOqXCn.js";import"../modules/shiki-CVmV-mGN.js";const M={},oe=te(()=>({html(r,t){return{html:r}}})),ae=[oe],le=Z(async()=>{const r={javascript:E,js:E,typescript:E,ts:E},{getHighlighter:t}=await V(async()=>{const{getHighlighter:i}=await import("./shiki-QBZ13Uek.js");return{getHighlighter:i}},__vite__mapDeps([0,1,2,3,4,5,6])),s=await t(),f=async(i,m,l)=>{try{const d=r[m];if(!d)throw new Error(`Runner for language "${m}" not found`);return await d(i,{options:l,highlight:s,run:async(e,n)=>await f(e,n,l)})}catch(d){return console.error(d),{error:`${d}`}}};for(const i of ae){const m=await i(r);Object.assign(r,m)}return{highlight:s,run:f}});function ce(r){const t=w([]),s=e=>t.value.push({error:String(e)}),f=(...e)=>t.value.push(e.map(m)),i=Object.assign({},console);i.info=i.log=i.debug=i.warn=i.error=f,i.clear=()=>t.value.length=0;try{const e=`return async (console, __slidev_import, __slidev_on_error) => {
      try {
        ${d(r)}
      } catch (e) {
        __slidev_on_error(e)
      }
    }`;new Function(e)()(i,n=>{const u=M[n];if(!u)throw new Error(`Module not found: ${n}.
Available modules: ${Object.keys(M).join(", ")}. Please refer to https://sli.dev/custom/config-code-runners#additional-runner-dependencies`);return u},s)}catch(e){s(e)}function m(e){return typeof e=="string"?{text:e}:{text:l(e),highlightLang:"javascript"}}function l(e){var u;let n="";if(e instanceof Error)n=`Error: ${JSON.stringify(e.message)}`;else if(e==null||typeof e=="symbol")n=String(e);else if(Array.isArray(e))n=`[${e.map(l).join(", ")}]`;else if(e instanceof Set){const c=[...e];n=`Set (${e.size}) {${c.map(l).join(", ")}}`}else if(e instanceof Map){const c=[...e.entries()];n=`Map (${e.size}) {${c.map(([p,h])=>`${l(p)} => ${l(h)}`).join(", ")}}`}else if(e instanceof RegExp)n=e.toString();else if(typeof e=="string")n=JSON.stringify(e);else if(typeof e=="object"){const c=((u=e.constructor)==null?void 0:u.name)??"",p=c&&c==="Object"?"":c;n=(p?`${p}: `:"")+JSON.stringify(e,(y,v)=>v===void 0?"__undefined__":v,2).replace(/"__undefined__"/g,"undefined"),n=String(n)}else n=String(e);return n}function d(e){return e=e.replace('import "reflect-metadata"',"").replace('require("reflect-metadata")',""),e=e.replace("export {};",""),e}return t}let C;async function E(r){C??(C=await V(()=>import("../monaco/bundled-types-CTRGeRro.js").then(s=>s.t),__vite__mapDeps([1,2,3,4]))),r=C.transpileModule(r,{compilerOptions:{module:C.ModuleKind.ESNext,target:C.ScriptTarget.ES2022},transformers:{after:[ue]}}).outputText;const t=/import\s*\((.+)\)/g;return r=r.replace(t,(s,f)=>`__slidev_import(${f})`),ce(r)}function ue(r){const{factory:t}=r,{isImportDeclaration:s,isNamedImports:f,NodeFlags:i}=C;return m=>{var d,e;const l=[...m.statements];for(let n=0;n<l.length;n++){const u=l[n];if(!s(u))continue;let c;const p=(d=u.importClause)==null?void 0:d.namedBindings,h=[];if((e=u.importClause)!=null&&e.name&&h.push(t.createBindingElement(void 0,t.createIdentifier("default"),u.importClause.name)),p)if(f(p)){for(const v of p.elements)h.push(t.createBindingElement(void 0,v.propertyName,v.name));c=t.createObjectBindingPattern(h)}else c=t.createIdentifier(p.name.text);else c=t.createObjectBindingPattern(h);const y=t.createVariableStatement(void 0,t.createVariableDeclarationList([t.createVariableDeclaration(c,void 0,void 0,t.createAwaitExpression(t.createCallExpression(t.createIdentifier("import"),void 0,[u.moduleSpecifier])))],i.Const));l[n]=y}return t.updateSourceFile(m,l)}}const de=T({__name:"DomElement",props:{element:{}},setup(r){const t=r,s=w();return I(()=>{s.value&&s.value.appendChild(t.element)}),(f,i)=>(o(),a("div",{ref_key:"container",ref:s},null,512))}}),me={key:0,class:"text-sm text-center opacity-50"},pe={key:1,class:"text-sm text-center opacity-50"},fe={key:2,class:"text-sm text-center opacity-50"},he=["innerHTML"],_e={key:1,class:"text-red-500"},ve={key:3,class:"output-line"},ge=["innerHTML"],ye={key:2,class:"separator"},xe={key:0,class:"absolute right-1 top-1 max-h-full flex gap-1"},$e=T({__name:"CodeRunner",props:{modelValue:{},lang:{},autorun:{type:[Boolean,String]},height:{},showOutputAt:{type:[null,Boolean,String,Number,Array]},highlightOutput:{type:Boolean},runnerOptions:{}},emits:["update:modelValue"],setup(r,{emit:t}){const s=r,f=t,{isPrintMode:i}=ne(),m=L(s,"modelValue",f),{$renderContext:l,$clicksContext:d}=re(),e=P(()=>!["slide","presenter"].includes(l.value)),n=i.value?"once":s.autorun,u=w(n),c=D(),p=w(0),h=w(),y=w(s.showOutputAt);if(s.showOutputAt){const S=se();H(()=>{const g=d.calculate(s.showOutputAt);g?(d.register(S,g),z(()=>{y.value=!g.isActive.value})):y.value=!1}),J(()=>d.unregister(S))}const v=ee(200,async()=>{if(e.value)return;const{highlight:S,run:g}=await le();h.value=S;const _=setTimeout(()=>{u.value=!0},500);c.value=await g(m.value,s.lang,s.runnerOptions??{}),p.value+=1,u.value=!1,clearTimeout(_)});return n==="once"?v():n&&F(m,v,{immediate:!0}),(S,g)=>(o(),a(k,null,[U(A("div",{class:"relative flex flex-col rounded-b border-t border-main",style:X({height:s.height}),"data-waitfor":".slidev-runner-output"},[e.value?(o(),a("div",me,' Code is disabled in the "'+O(x(l))+'" mode ',1)):u.value?(o(),a("div",pe," Running... ")):c.value?(o(),a("div",{key:`run-${p.value}`,class:"slidev-runner-output"},[(o(!0),a(k,null,B(x($)(W(c.value)),(_,N)=>(o(),a(k,{key:N},["html"in _?(o(),a("div",{key:0,innerHTML:_.html},null,8,he)):"error"in _?(o(),a("div",_e,O(_.error),1)):"element"in _?(o(),G(de,{key:2,element:_.element},null,8,["element"])):(o(),a("div",ve,[(o(!0),a(k,null,B(x($)(_),(b,j)=>(o(),a(k,{key:j},[b.highlightLang&&h.value?(o(),a("span",{key:0,class:"highlighted",innerHTML:h.value(b.text,b.highlightLang)},null,8,ge)):(o(),a("span",{key:1,class:K(b.class)},O(b.text),3)),j<x($)(_).length-1?(o(),a("span",ye,",")):R("v-if",!0)],64))),128))]))],64))),128))])):(o(),a("div",fe," Click the play button to run the code "))],4),[[q,!y.value]]),x(m).trim()?(o(),a("div",xe,[Q(ie,{class:"w-8 h-8 max-h-full flex justify-center items-center",title:"Run code",onClick:x(v)},{default:Y(()=>g[0]||(g[0]=[A("div",{class:"i-carbon:play"},null,-1)])),_:1,__:[0]},8,["onClick"])])):R("v-if",!0)],64))}});export{$e as default};
